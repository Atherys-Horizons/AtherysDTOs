plugins {
    id 'java'
    id 'maven-publish'
}

group 'org.atherys'
version '1.0.0'

repositories {
    mavenCentral()
}

dependencies {
    compile 'com.google.code.gson:gson:2.8.0'
}

publishing {
    repositories {
        maven {
            version = project.hasProperty("release") ? project.version : project.version + "-SNAPSHOT";

            def releasesRepoUrl = "https://repo.atherys.com/releases"
            def snapshotsRepoUrl = "https://repo.atherys.com/snapshots"
            url = project.hasProperty("release") ? releasesRepoUrl : snapshotsRepoUrl
            credentials(PasswordCredentials) {
                username = project.properties.getOrDefault("repoUploadAlias", "none")
                password = project.properties.getOrDefault("repoUploadToken", "none")
            }
        }
    }
    publications {
        shadow(MavenPublication) { publication ->
            project.shadow.component(publication)
        }
    }
}